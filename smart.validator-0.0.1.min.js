"use strict";function SmartValidator(e){if(!this instanceof SmartValidator)throw"SmartValidator must be instantiated with `new`.";void 0===e&&(e=setInterval),this.container,this.$interval=e,this.settings={selector:"*.required,*[required],*[data-required],*[data-ng-required],*[ng-required]",callback:function(){},interval:100,templates:{validClass:"ok",invalidClass:"incomplete",required:'<span class="required incomplete"></span>',validation:'<span class="validation" style="display:none;">{0}</span>',completeSign:"&#x2714",incompleteSign:"!"}}}!function(e){e&&e.module("smart.validator",[]).factory("$smartValidator",["$interval",function(e){return new SmartValidator(e)}])}(window.angular||void 0),SmartValidator.prototype={version:"0.0.1",_kill:function(e){return void 0===e&&(e=void 0),this.$interval.cancel?this.$interval.cancel():e?(clearInterval(e),!0):!1},validate:function(e,t){void 0===t&&(t={});var i=this;for(var r in t)this.settings[r]=t[r];return this.container=this.$utils.id(e),this.$interval(function(){i.checkRequiredFields(i)},this.settings.interval)},$utils:{id:function(e){return"string"==typeof e?document.getElementById(e):e},addClass:function(e,t){var i=e.className.split(" ");return i.indexOf(t)>-1?e:(i.push(t),e.className=this.trim(i.join(" ")),e)},removeClass:function(e,t){var i=e.className;return e.className=i.replace(new RegExp(t),"").replace(/\s{2}/," "),e},after:function(e,t){if(e.constructor==String){var i=document.createElement("div");i.innerHTML=e,e=i.querySelector(":first-child")}return t.parentNode.insertBefore(e,t.nextSibling),e},show:function(e){return e.style.display=null,e},hide:function(e){return e.style.display="none",e},toArray:function(e){return Array.prototype.slice.call(e)},trim:function(e){return(e+"").replace(/(^\s+|\s+$)/g,"")},getValue:function(e,t){t=t||document.body;var i="";return i="checkbox"==e.type?e.checked?"true":"":this.trim(e.value)},needsValue:function(e,t){return""==this.getValue(e,t)}},rxValidators:/\b(email|phone|ssn|zip|date)\b/,checkRequiredFields:function(e){void 0===e&&(e=this);var t=this.$utils,i=t.toArray(this.container.querySelectorAll(e.settings.selector)),r=e.settings.templates,a=0,n=!1,s=i.filter(function(i){return t.needsValue(i,e.container)}).length,l=e.validateFields(e);i.forEach(function(i){i.$$required||(i.$$required=t.after(r.required,i)),t.needsValue(i,e.container)?(t.removeClass(i.$$required,r.validClass),t.addClass(i.$$required,r.invalidClass),i.$$required.innerHTML=r.incompleteSign):(t.removeClass(i.$$required,r.invalidClass),t.addClass(i.$$required,r.validClass),i.$$required.innerHTML=r.completeSign)}),a=i.length,n=a-s==a&&l,this.settings.callback(n,a,s,e)},validateFields:function(e){void 0===e&&(e=this);var t=0,i=this.$utils,r=i.toArray(e.container.querySelectorAll("input.email,input.phone,input.ssn,input.zip,input.date"));return r.forEach(function(r){var a=r.value,n=e.rxValidators.exec(r.className)[0],s="Invalid "+n.replace(/^\w/,function(e){return e.toUpperCase()});r.$$validation||(r.$$validation=i.after(e.settings.templates.validation.replace(/\{0\}/g,s),r)),!e.validatePattern(a,n)&&a?(i.show(r.$$validation),t+=1):i.hide(r.$$validation)}),0==t},validatePattern:function(e,t){var i=this.$utils;if(!e)return!1;var e=i.trim(e);if(0==e.length)return!1;var r;switch(t){case"email":r=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;break;case"zip":r=/\d{5}(-\d{4})?/;break;case"phone":return/^(?:\+?1[-. ]?)?\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/.test(e)||/^\+(?:[0-9] ?){6,14}[0-9]$/.test(e);case"date":r=/\d{1,2}(\-|\/)\d{1,2}(\-|\/)\d{2,4}$/;break;case"ssn":r=/^\d{3}\-\d{2}\-\d{4}$/;break;default:return!1}return r.test(e)}};